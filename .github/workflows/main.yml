# =======================
# MAIN
# =======================
def main():
    df = load_prices()
    df = build_features(df)

    if df is None or len(df) < 200:
        print("[WARN] Not enough data to train model")
        return

    features = (
        [c for c in df.columns if isinstance(c, str) and c.startswith(("Gas_Return_lag", "Oil_Return_lag"))]
        + ["Storage_Surprise_Z", "LNG_Feedgas_Surprise_Z"]
    )

    # Train model (current version returns ONLY model)
    model = train_model(df, features)

    # Forecast
    last_row = df.iloc[-1:]
    prob_up = model.predict_proba(last_row[features])[0][1]

    # Permutation importance
    perm = permutation_importance_ts(model, df, features)

    print("\n[INFO] Permutation importance (accuracy drop):")
    for f, v in sorted(perm.items(), key=lambda x: x
